from FireApi import Client, Response, Request
from sys import argv
import random


fn get_k() raises -> Int:
    let args = argv()
    if len(args) < 2:
        raise Error("enter a number for k")
    let inp = args[1]
    try:
        let k: Int = atol(inp)
        return k
    except Error:
        raise Error

    
fn main() raises -> None:
    let k: Int = get_k()

    let client = Client(
        host_name="127.0.0.1",
        port=9090,
        endpoint="/kth_fibonnaci",
    )

    let req = Request(
        body=str(k),
        method="GET",
    )

    let resp = client.send_request(request=req)
    print(str(k) + "th fibonacci = " + resp.body)
