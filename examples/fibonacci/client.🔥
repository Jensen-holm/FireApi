from FireTCP import TCPRequest, TCPResponse
from FireTCP.clients import TCPClient
from sys import argv
import random


fn get_k() raises -> Int:
    var args = argv()
    if len(args) < 2:
        raise Error("enter a number for k")
    var inp = args[1]
    var k: Int = atol(inp)
    return k


fn main() raises -> None:
    var k: Int = get_k()
    var client = TCPClient(
        host_name="127.0.0.1",
        port=9090,
    )

    var req = TCPRequest(body=str(k))
    var resp = client.send_request(request=req)

    var kth_fib = resp.body()
    print(str(k) + " fibonacci = " + kth_fib)
